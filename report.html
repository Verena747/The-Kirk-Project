<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Report a Threat | The Kirk Project</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>The Kirk Project</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="report.html" class="active">Report</a>
      <a href="about.html">About</a>
      <a href="faq.html">FAQ</a>
    </nav>
  </header>

  <main>
    <h2>Report a Potential Threat</h2>
    <p>
      Please provide as much detail as possible. Every report is confidential and assessed for credibility and urgency. 
      This system automatically calculates a threat rating based on keyword analysis.
    </p>

    <!-- Report Form -->
    <form id="reportForm" action="https://formspree.io/f/YOUR-FORM-ID" method="POST">
      <label for="reporterName">Your Name (optional):</label>
      <input type="text" id="reporterName" name="reporterName" placeholder="Enter your name or leave blank" />

      <label for="contact">Contact Email (optional):</label>
      <input type="email" id="contact" name="contact" placeholder="email@example.com" />

      <label for="threatSource">Where did you see this comment or post?</label>
      <input type="text" id="threatSource" name="threatSource" placeholder="e.g., Twitter, Facebook, School Forum" required />

      <label for="threatDetails">Describe the comment or threat:</label>
      <textarea id="threatDetails" name="threatDetails" rows="6" required placeholder="Enter full comment or description..."></textarea>

      <input type="hidden" name="threatScore" id="threatScore" />

      <button type="submit">Submit Report</button>
    </form>

    <div id="result" style="margin-top:1.5rem; font-weight:bold;"></div>
  </main>

  <footer>
    <p>&copy; 2025 The Kirk Project</p>
  </footer>

  <script>
    // Simple keyword-based scoring
    const threatKeywords = [
      "kill", "attack", "shoot", "bomb", "violence", "hate",
      "destroy", "target", "threaten", "assault", "massacre",
      "weapon", "explode", "murder", "harm"
    ];

    const form = document.getElementById("reportForm");
    const resultBox = document.getElementById("result");

    form.addEventListener("submit", function (event) {
      event.preventDefault();

      const text = document.getElementById("threatDetails").value.toLowerCase();
      let score = 0;

      // Count matching keywords
      threatKeywords.forEach((word) => {
        const occurrences = text.split(word).length - 1;
        score += occurrences * 10;
      });

      // Cap score at 100
      if (score > 100) score = 100;

      // Display result
      let message = "";
      if (score >= 75) message = `⚠️ High risk (${score}%)`;
      else if (score >= 40) message = `⚠️ Moderate risk (${score}%)`;
      else message = `✅ Low risk (${score}%)`;

      resultBox.textContent = `Threat Level: ${message}`;
      resultBox.style.color = score >= 75 ? "red" : score >= 40 ? "orange" : "green";

      // Store the score for Formspree
      document.getElementById("threatScore").value = score;

      // Submit the form after grading
      form.submit();
    });
  </script>
</body>
</html>
