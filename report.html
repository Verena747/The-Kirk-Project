<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Report a Threat | The Kirk Project</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <div class="header-container">
      <div class="logo">
        <h1>The Kirk Project</h1>
        <p class="tagline">Investigating and Preventing Targeted Violence</p>
      </div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="faq.html">FAQ</a></li>
          <li><a href="report.html" class="active">Report</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section>
      <h2>Submit a Threat Report</h2>
      <p style="text-align:center; max-width:700px; margin:0 auto 2rem; color:#333;">
        Every report matters. Provide as much detail as possible — our system will analyze your report 
        and generate a preliminary credibility score to assist our assessment team.
      </p>

      <form id="reportForm" action="https://formspree.io/f/mzzjqknl" method="POST">
        <label for="name">Your Name (optional)</label>
        <input type="text" id="name" name="name">

        <label for="email">Your Email (for follow-up, optional)</label>
        <input type="email" id="email" name="email">

        <label for="location">Location of Threat (if known)</label>
        <input type="text" id="location" name="location">

        <label for="threat">Describe the Threat</label>
        <textarea id="threat" name="threat" rows="6" placeholder="Include details, names, dates, platforms, etc." required></textarea>

        <!-- Hidden input that stores the calculated threat grade -->
        <input type="hidden" id="threatGrade" name="threatGrade">

        <button type="submit">Submit Report</button>

        <!-- Message that appears after submission -->
        <p id="thankYou" style="display:none; text-align:center; margin-top:1rem; color:green;">
          ✅ Thank you for submitting your report. It has been received for review.
        </p>
      </form>
    </section>
  </main>

  <footer>
    <p>© 2025 The Kirk Project. All rights reserved.</p>
  </footer>

  <!-- ===== Threat Assessment Script ===== -->
  <script>
    // Simple keyword-based grading system
    function calculateThreatLevel(text) {
      const highRisk = ["kill", "shoot", "bomb", "attack", "violence", "threat", "harm", "murder", "school", "weapon", "gun", "knife", "stab", "torture"];
      const mediumRisk = ["hate", "anger", "fight", "danger", "hurt", "target"];
      let score = 0;

      const input = text.toLowerCase();

      highRisk.forEach(word => { if (input.includes(word)) score += 15; });
      mediumRisk.forEach(word => { if (input.includes(word)) score += 7; });

      if (score > 100) score = 100;
      return score;
    }

    // Handle form submission
    const form = document.getElementById('reportForm');
    form.addEventListener('submit', function(e) {
      const threatText = document.getElementById('threat').value;
      const grade = calculateThreatLevel(threatText);
      document.getElementById('threatGrade').value = grade;

      // Optional: show confirmation message
      setTimeout(() => {
        document.getElementById('thankYou').style.display = 'block';
      }, 500);
    });
  </script>
</body>
</html>
